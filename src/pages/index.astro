---
import Layout from '../layouts/Layout.astro';
import { getPageContent, getProducts } from '../lib/wp';

const pageContent = await getPageContent('home');
const products = await getProducts();

const { title, content } = pageContent;
interface ProductType {
  id: string;
  name: string;
  description: string;
  onSale: boolean;
  productCategories: {
    nodes: {
      name: string;
    }[];
  };
  image: {
    sourceUrl: string;
  };
  regularPrice: number;
  salePrice: number;
}
---

<Layout>
  <main class="flex flex-col justify-center items-start w-full">
    <section class="flex w-full h-screen bg-amber-100">
      <h1 class="text-3xl font-bold text-center">{title}</h1>
      <div class="text-xl mx-auto max-w-[900px]" set:html={content} />
    </section>
    <section class="flex w-full h-screen bg-amber-900 text-amber-50">
      <h1 class="text-3xl font-bold text-center">Productos !</h1>
      {
        products.map((product: ProductType) => (
          <div class="flex flex-col items-center justify-center w-[320px] h-full p-10">
            <img
              class="w-[100px]"
              src={product.image.sourceUrl}
              alt={product.name}
            />
            <h2 class="text-xl font-bold">{product.name}</h2>
            <p class="text-xl" set:html={product.description} />
            <p class="text-xl" set:html={`Precio: ${product.regularPrice}`} />
          </div>
        ))
      }
    </section>
  </main>
</Layout>
